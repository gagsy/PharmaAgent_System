services:
  pharma-app:
    build: .
    ports:
      - "8501:8501"
      # NEW: WebRTC Signaling and Data ports (Standard range for STUN/TURN)
      - "8502:8502"
      - "3478:3478/udp" 
    volumes:
      # Use ${PWD} for more stable path mapping on Windows
      - .:/usr/src/app
      - ./data:/usr/src/app/data
      - ./models:/usr/src/app/models
      - ./dataset:/usr/src/app/dataset
      - ./src:/usr/src/app/src
    
    # Environment variables to help WebRTC find the right address
    environment:
      - STREAMLIT_SERVER_PORT=8501
      - STREAMLIT_SERVER_ADDRESS=0.0.0.0
    
    restart: unless-stopped